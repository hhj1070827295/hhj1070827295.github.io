<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue cli的使用心得 | hagi笔记</title>
    <meta name="generator" content="VuePress 1.5.3">
    
    <meta name="description" content="黄小基的笔记">
    <link rel="preload" href="/assets/css/0.styles.339bfd79.css" as="style"><link rel="preload" href="/assets/js/app.646fa2cb.js" as="script"><link rel="preload" href="/assets/js/2.58f4be8b.js" as="script"><link rel="preload" href="/assets/js/24.b71d1107.js" as="script"><link rel="prefetch" href="/assets/js/10.d7b693ff.js"><link rel="prefetch" href="/assets/js/11.901e9fc0.js"><link rel="prefetch" href="/assets/js/12.22449e20.js"><link rel="prefetch" href="/assets/js/13.3124d834.js"><link rel="prefetch" href="/assets/js/14.6cd76895.js"><link rel="prefetch" href="/assets/js/15.b47db7b7.js"><link rel="prefetch" href="/assets/js/16.163eb3a1.js"><link rel="prefetch" href="/assets/js/17.3faaa73a.js"><link rel="prefetch" href="/assets/js/18.e2ff48e4.js"><link rel="prefetch" href="/assets/js/19.ebce7b75.js"><link rel="prefetch" href="/assets/js/20.c488fab8.js"><link rel="prefetch" href="/assets/js/21.cf60c5ae.js"><link rel="prefetch" href="/assets/js/22.2a403029.js"><link rel="prefetch" href="/assets/js/23.4f6a3adb.js"><link rel="prefetch" href="/assets/js/25.32a11254.js"><link rel="prefetch" href="/assets/js/3.47b18929.js"><link rel="prefetch" href="/assets/js/4.44e44658.js"><link rel="prefetch" href="/assets/js/5.0e269fb0.js"><link rel="prefetch" href="/assets/js/6.beb2b037.js"><link rel="prefetch" href="/assets/js/7.44c2bbb0.js"><link rel="prefetch" href="/assets/js/8.4777adf2.js"><link rel="prefetch" href="/assets/js/9.1d87142b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.339bfd79.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">hagi笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>js灵活运用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>css灵活运用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>es6灵活运用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微信小程序技巧</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面试题相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>实践中遇到的一些问题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>vue相关知识</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueskill/" aria-current="page" class="sidebar-link">vue 的使用心得</a></li><li><a href="/vueskill/axios.html" class="sidebar-link">vue axios封装</a></li><li><a href="/vueskill/router.html" class="sidebar-link">路由相关</a></li><li><a href="/vueskill/vuecli.html" aria-current="page" class="active sidebar-link">vue cli的使用心得</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>element框架使用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mpvue坑点</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>兼容性问题</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="vue-cli的使用心得"><a href="#vue-cli的使用心得" class="header-anchor">#</a> vue cli的使用心得</h3> <h5 id="webpack的打包方式"><a href="#webpack的打包方式" class="header-anchor">#</a> webpack的打包方式</h5> <p>1、加载js资源默认是会将之后会用到的一些资源也加载进来，如果不需要这个配置，可以在vue.config.js添加以下代码：</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'preload'</span><span class="token punctuation">)</span> <span class="token comment">// TODO: need test</span>
  config<span class="token punctuation">.</span>optimization<span class="token punctuation">.</span><span class="token function">minimize</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'prefetch'</span><span class="token punctuation">)</span> <span class="token comment">//移除预加载的资源</span>
 <span class="token punctuation">}</span>
</code></pre></div><p>2、webpack要打包出不同的文件名，用类似一下的方式即可。</p> <div class="language-js extra-class"><pre class="language-js"><code>   outputDir<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ENV</span> <span class="token operator">===</span> <span class="token string">'testing'</span> <span class="token operator">?</span> <span class="token string">'dist'</span> <span class="token operator">:</span> <span class="token string">'online'</span><span class="token punctuation">,</span>
</code></pre></div><p>3、vue路由改为history的配置,首先后端要配置，然后根据加载的资源地址，如果资源地址是http:www.xxxx.com/web_dist/，那么路由上的base也要添加该路径如</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">createRouter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    mode<span class="token operator">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span> <span class="token comment">// require service support</span>
    base<span class="token operator">:</span><span class="token string">'/web_dist/'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">scrollBehavior</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        y<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    routes<span class="token operator">:</span> constantRoutes
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>4、vue.config.js该文件为vue cli3及以上版本创建时会生成的一个文件，如果项目没有该文件，可以在根目录创建一个文件，与package.json同级</p> <div class="language-js extra-class"><pre class="language-js"><code>    publicPath<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PUBLIC_PATH</span><span class="token punctuation">,</span>
    productionSourceMap<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
    outputDir<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ENV</span> <span class="token operator">===</span> <span class="token string">'test'</span> <span class="token operator">?</span> <span class="token string">'dist'</span> <span class="token operator">:</span> <span class="token string">'online'</span><span class="token punctuation">,</span> 
</code></pre></div><p><code>publicPath:项目的资源地址，资源地址可以使用域名，process.env.PUBLIC_PATH为https:www.xxxxx.com,那么打包出来后的地址前缀就是是该域名加上文件名,这样做的好处是资源与代码是分割开的，不论项目部署在任何地方，都不会出现问题，详情可以查看打包出来后的文件夹里的index.html。如果process.env.PUBLIC_PATH为'/'，那么该做法就是绝对路径，也就是项目部署在什么地址上，资源就加载该项目地址下的某一个文件夹，如部署在https:www.xxxxx.com,那么资源就是https:www.xxxxx.com/js,部署在https:www.xxxxx.com/web_dist,那么资源就会报错，因为实际上的资源是在https:www.xxxxx.com/web_dist/js，而我们确实请求的https:www.xxxxx.com/js。还有一种就是'./'，该方式为相对路径，他是相对当前的路由地址去请求资源的，如果路由层级有两层，那么该方式可能就会行不通。</code></p> <p><code>productionSourceMap:把这个改为false。不然在最终打包的文件中会出现一些map文件，map文件的作用在于：项目打包后，代码都是经过压缩加密的，如果运行时报错，输出的错误信息无法准确得知是哪里的代码报错。</code></p> <p><code>outputDir: 用于区分打包后的文件夹是测试环境还是正式环境，如果是测试环境，打包出来的话会发现文件夹会多了一个dist目录，而打包正式环境的话会是在online的目录下，当然打包出来为了确保一下，最好还是看一下资源地址是否有问题。</code></p> <p>5、package.json，该文件主要是以下的代码有点重要，这对我们运行项目以及打包可以配置命令的</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service serve&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service serve&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;build:testing&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service build --mode testing&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service build&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service lint&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;build:prod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service build --mode production&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p><code>vue cli3版本及以上的默认的运行项目是npm run serve ，而我们可以在这里配置一个dev的方式，查看以上，同时打包编译时我们也可以配置，这样配置后，打包时可以进入到指定的环境，如以上，testing就是测试环境的包，production就是正式环境的包。如果对环境变量不熟悉的，可以去看一下这篇文章的环境变量编写。'</code><a href="https://cli.vuejs.org/zh/guide/mode-and-env.html#%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener noreferrer">https://cli.vuejs.org/zh/guide/mode-and-env.html#模式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>6、关于项目文件过多，css与js文件均过多的情况下，打包时报错：Multiple chunks emit assets to the same filename js/xxxx.js(多个文件发送到统一资源名)</p> <div class="language-js extra-class"><pre class="language-js"><code>    css<span class="token operator">:</span> <span class="token punctuation">{</span>
      extract<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">// 是否使用css分离插件 ExtractTextPlugin，将这是设置为false即可，这里是与配置的chainWebpack、configureWebpack同级（这种方式打包出来的不会有css文件夹）</span>
      sourceMap<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">// 开启 CSS source maps</span>
      loaderOptions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">// css预设器配置项</span>
      modules<span class="token operator">:</span> <span class="token boolean">false</span><span class="token comment">// 启用 CSS modules for all css / pre-processor files.</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vueskill/router.html" class="prev">
        路由相关
      </a></span> <span class="next"><a href="/elementUi/">
        侧边栏高亮的问题
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.646fa2cb.js" defer></script><script src="/assets/js/2.58f4be8b.js" defer></script><script src="/assets/js/24.b71d1107.js" defer></script>
  </body>
</html>
